{% load static %}
{% load humanize %}
<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0">

    <title>فروشگاه</title>
    <meta name="keywords"
          content="Bootstrap 5.x, ecommerce, farming, food market, grocery market, grocery shop, grocery store, grocery supper market, multi vendor, organic food, supermarket, supermarket grocery">
    <meta name="description" content="Multipurpose eCommerce HTML Template">
    <meta name="author" content="Pilarest">

    <!-- site Favicon -->
    <link rel="icon" href="{% static 'assets/img/favicon/favicon.png' %}" sizes="32x32">

    <!-- css Icon Font -->
    <link rel="stylesheet" href="{% static 'assets/css/vendor/msicons.min.css' %}">

    <!-- css All Plugins Files -->
    <link rel="stylesheet" href="{% static 'assets/css/plugins/animate.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/bootstrap.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/bootstrap-select.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/owl.carousel.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/owl.theme.default.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/swiper-bundle.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/slick.min.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/plugins/nouislider.css' %}">

    <link rel="stylesheet" href="../../static/assets/css/new-page.css">

    <!-- Main Style -->
    <link rel="stylesheet" id="main_style" href="{% static '../static/assets/css/new-page.css' %}">
    <link rel="stylesheet" href="{% static 'assets/css/responsive.css' %}">
    <link rel="stylesheet" class="color-css" href="{% static 'assets/css/color-01.css' %}">
   <style>
       .item-shop {
    display: flex;
    flex-wrap: wrap;
    border: 1px solid #ddd;
    border-radius: 10px;
    margin-bottom: 20px;
    padding: 10px;
    background-color: #fff;
    transition: box-shadow 0.3s ease;
    max-width: 100%;
    box-sizing: border-box;
}

.item-shop:hover {
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
}

.shop-info {
    display: flex;
    flex: 1;
    padding-right: 20px; /* افزایش فاصله سمت راست */
}

.shop-image {
    width: 150px;
    height: 150px;
    overflow: hidden;
    border-radius: 8px;
    flex-shrink: 0;
    display: flex;
    justify-content: center;
    align-items: center;
}

.shop-image img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    border-radius: 8px;
}

.shop-details {
    margin-left: 20px; /* افزایش فاصله بین متن‌ها */
    flex: 1;
}

.shop-details h2 {
    font-size: 1.2em;
    font-weight: bold;
    margin: 0;
}

.shop-details p {
    margin: 10px 0; /* افزایش فاصله بین پاراگراف‌ها */
    color: #777;
}

.product-info {
    text-align: left;
    flex-basis: 250px;
    margin-left: auto;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.product-info .product-name {
    font-size: 1.1em;
    font-weight: bold;
    margin-bottom: 10px;
}

.product-info .product-price {
    font-size: 1.2em;
    color: #e23131;
    margin: 10px 0;
}


.product-info .btn-buy {
    display: inline-block;
    background: linear-gradient(180deg, #f04151, #d73948);
    color: #fff;
    padding: 10px 20px;
    text-align: center;
    text-decoration: none;
    border-radius: 5px;
    font-size: 1em;
    margin-top: 15px; /* تغییر فاصله از بالای دکمه */
    margin-right: auto; /* جابجایی دکمه به سمت چپ */
    transition: background-color 0.3s;
}

.product-info .btn-buy:hover {
    background-color: #0056b3;
}

   </style>
</head>

<body>

<!-- Loader -->
<div id="ms-overlay">
    <div class="loader"></div>
</div>

<!-- Header start  -->
{% include '../extentions/header.html' with categories=categories_map %}
<!-- Header End  -->

<!-- Category sidebar Start -->


<div class="ms-side-cart-overlay"></div>
{% include '../extentions/shops_basket.html' with basket=basket toke=token %}
<!-- Cart sidebar End -->

<!-- Wishlist sidebar Start -->
<div class="ms-side-wish-overlay"></div>
<div id="ms-side-wish" class="ms-side-wish">
    <div class="ms-wish-inner">
        <div class="ms-wish-top">
            <div class="ms-wish-title">
                <span class="wish_title">لیست علاقه مندی‌ها</span>
                <a href="javascript:void(0)" class="ms-wish-close"><img src="{% static 'assets/img/icons/close.svg' %}"
                                                                        class="svg_img pro_svg" alt="close"></a>
            </div>
            <ul class="ms-wish-pro-items">
                <li>
                    <a href="product-left-sidebar.html" class="ms-pro-img"><img
                            src="{% static 'assets/img/product-images/18_1.jpg' %}" alt="product"></a>
                    <div class="ms-pro-content">
                        <a href="product-left-sidebar.html" class="wish-pro-title">لیمو</a>
                        <span class="wish-price"><span>25 هزار x </span> کیلوگرم </span>
                        <div class="ms-availability">
                            <p class="stock avail">موجود در انبار</p>
                            <a href="" class="ms-btn-2">خرید</a>
                        </div>
                        <a href="javascript:void(0)" class="remove">×</a>
                    </div>
                </li>
                <li>
                    <a href="product-left-sidebar.html" class="ms-pro-img"><img
                            src="{% static 'assets/img/product-images/20_1.jpg' %}" alt="product"></a>
                    <div class="ms-pro-content">
                        <a href="product-left-sidebar.html" class="wish-pro-title">مارچوبه</a>
                        <span class="wish-price"><span>5 هزار x</span> گرم</span>
                        <div class="ms-availability">
                            <p class="stock not-avail">موجودی</p>
                            <div class="ms-wish-contact-btns">
                                <a href="" class="ms-btn-2 btn-disabled">خرید</a>
                                <a href="" class="ms-btn-1">مخاطب</a>
                            </div>
                        </div>
                        <a href="javascript:void(0)" class="remove">×</a>
                    </div>
                </li>
                <li>
                    <a href="product-left-sidebar.html" class="ms-pro-img"><img
                            src="{% static 'assets/img/product-images/31_1.jpg' %}" alt="product"></a>
                    <div class="ms-pro-content">
                        <a href="product-left-sidebar.html" class="wish-pro-title">انبه</a>
                        <span class="wish-price"><span>59 هزار x</span> بسته</span>
                        <div class="ms-availability">
                            <p class="stock avail">موجود در انبار</p>
                            <a href="" class="ms-btn-2">خرید</a>
                        </div>
                        <a href="javascript:void(0)" class="remove">×</a>
                    </div>
                </li>
                <li>
                    <a href="product-left-sidebar.html" class="ms-pro-img"><img
                            src="{% static 'assets/img/product-images/23_1.jpg' %}" alt="product"></a>
                    <div class="ms-pro-content">
                        <a href="product-left-sidebar.html" class="wish-pro-title">توت فرنگی</a>
                        <span class="wish-price"><span>59 هزار x</span> کیلوگرم</span>
                        <div class="ms-availability">
                            <p class="stock avail">موجود در انبار</p>
                            <a href="" class="ms-btn-2">خرید</a>
                        </div>
                        <a href="javascript:void(0)" class="remove">×</a>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>
<!-- Wishlist sidebar End -->

<!-- Breadcrumb start -->
<div class="ms-breadcrumb m-b-30">
    <div class="container">
        <div class="row">
            <div class="col-12">
                <div class="row ms_breadcrumb_inner">
                    <div class="col-md-6 col-sm-12">
                        <h2 class="ms-breadcrumb-title">لیست فروشگاه های موجود</h2>
                    </div>
                    <div class="col-md-6 col-sm-12">
                        <!-- ms-breadcrumb-list start -->
                        {#                            <ul class="ms-breadcrumb-list">#}
                        {#                                <li class="ms-breadcrumb-item"><a href="index.html">خانه</a><i class="fas fa-chevron-left"></i></li>#}
                        {#                                <li class="ms-breadcrumb-item active"> درباره ما</li>#}
                        {#                            </ul>#}
                        <!-- ms-breadcrumb-list end -->
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- Breadcrumb end -->

<!-- content -->
<div class="c-content">
    <div class="it-product">
        <div class="itt">
            <div class="div-img-product">
                <img class="img-product" src="{{ product_shops.0.image.image.url }}">
            </div>
            <div class="div-info-detail">
                <div class="c-info-detail">
                    <p>{{ product_shops.0.product.name }}</p>
                    <div class="item-c">
                        <div>
                            <p>4</p>از<span>5</span>
                        </div>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star checked"></span>
                        <span class="fa fa-star"></span>
                    </div>
                    <div class="shop">
                        <h2><span>{{ product_shops|length|add:-1 }}</span> فروشنده دیگر </h2>
                        {#                        <div>#}
                        {#                            <ul>#}
                        {#                                <li class="fa fa-bell-o"></li>#}
                        {#                                <li class="fa fa-heart-o"></li>#}
                        {#                                <li class="fa fa-share-nodes"></li>#}
                        {#                            </ul>#}
                        {#                        </div>#}
                    </div>
                    <div class="pricee" onclick="window.location.href='/shop/{{ product_shops.0.shop.id }}/product/{{  product_shops.0.id }}'"
                         style="cursor: pointer;">
                        <div>
                            <p>فروشگاه {{ product_shops.0.shop.name| truncatechars:17}}</p>
                            <h3><span>{{ product_shops.0.price|intcomma:False }}</span> تومان</h3>
                        </div>
                        <div>
                            <h2>ارزان ترین</h2>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="shoping">
            <div class="shoping-titr">
                <h2>فروشنده ها</h2>
                {#                    <p>راهنمای خرین امن</p>#}
            </div>
            <!-- -->

            {% for i in product_shops|slice:"1:" %}
            <div class="item-shop">
                <div class="shop-info">
                    <div class="shop-image">
                        <!-- toro  -->
                        <!-- <img src="{ i.shop.image.url }" alt="{ i.shop.name }"/> -->
                    </div>
                    <div class="shop-details">
                        <p class="product-name">{{ i.product.name | truncatechars:20 }}</p>
                        <h2>{{ i.shop.name | truncatechars:17 }}</h2>
                        <p>{{ i.shop.user.city | truncatechars:17 }}</p>
                        <p class="shop-rating">امتیاز: {{ i.shop.get_rate_state_display }}</p>
                    </div>
                </div>

                <div class="product-info">
                    <p class="product-price">
                        <span>{{ i.price | intcomma:False }}</span> تومان
                    </p>
                    <a class="btn-buy" href="/shop/{{ i.shop.id }}/product/{{ i.id }}">خرید اینترنتی</a>
                </div>
            </div>
            {% endfor %}

        </div>
    </div>
    <div class="product-details">
        <h2>مشخصات محصول</h2>

        <hr>

        <div class="product-details-scroll">
            <div class="detail-item" style="display: flex; justify-content: space-between;">
                <div class="detail-label">
                    <p>نوع کالا:</p>
                </div>
                <div class="detail-value">
                    <p>{{ product_shops.0.product.get_type_display }}</p>
                </div>
            </div>

            <div class="detail-item" style="display: flex; justify-content: space-between;">
                <div class="detail-label">
                    <p>دسته بندی:</p>
                </div>
                <div class="detail-value">
                    <p>{{ product_shops.0.product.category.name | truncatechars:23 }}</p>
                </div>
            </div>

            <div class="detail-item" >
                <div class="detail-label">
                    <p>معرفی محصول:</p>
                </div>
                <div class="detail-value">
                    <p>{{ product_shops.0.product.description | truncatechars:50 }}</p>
                </div>
            </div>

            <div class="detail-item" style="display: flex; justify-content: space-between;">
                <div class="detail-label">
                    <p>قیمت:</p>
                </div>
                <div class="detail-value">
                    <p><span>{{ product_shops.0.price | intcomma }}</span> تومان</p>
                </div>
            </div>

            <div class="detail-item" style="display: flex; justify-content: space-between;">
                <div class="detail-label">
                    <p>وضعیت موجودی:</p>
                </div>
                <div class="detail-value">
                    <p>{{ product_shops.0.get_inventory_state_display }}</p>
                </div>
            </div>

            <div class="detail-item" style="display: flex; justify-content: space-between;">
                <div class="detail-label">
                    <p>ظرفیت:</p>
                </div>
                <div class="detail-value">
                    <p>{{ product_shops.0.capacity }} عدد</p>
                </div>
            </div>

            <div class="detail-item" style="display: flex; justify-content: space-between;">
                <div class="detail-label">
                    <p>امتیاز محصول:</p>
                </div>
                <div class="detail-value">
                    <p>⭐⭐⭐⭐⭐</p> <!-- این بخش برای نمایش امتیاز به صورت استاتیک یا دینامیک با داده‌های واقعی -->
                </div>
            </div>
        </div>
    </div>

</div>
<div class="items-result">
    <div id="table1" class="pagination-table">
        {% for i in products %}

            <div class="it-table">
                <a href="/search/product/{{ i.id }}/" style="margin: auto;">
                    <img class="img-table" src="{{ i.image_list.0.image.url }}">
                </a>
                <div style="display: flex; justify-content: space-between; margin: 0 16px;" class="name-ittt-table">
                    <a class="name">نام محصول :</a>
                    <a class="name-it">{{ i.name|truncatechars:12 }}</a>
                </div>
                <div style="display: flex; justify-content: space-between; margin: 16px;" class="name-ittt-table">
                    <a class="name"> قیمت محصول :</a>
                    <a class="name-it">{{ i.price|intcomma:False }} تومان </a>
                </div>
                {#            <span class="offer">offer</span>#}
            </div>
        {% endfor %}
    </div>
</div>
<!-- content end -->

<!-- Footer Start -->
{% include '../extentions/footer.html' %} %}
<!-- Footer Area End -->

<!-- Back to top  -->
<a class="ms-back-to-top"></a>

<!-- Features sidebar  -->
<div class="ms-features-sidebar-overlay"></div>
<div class="ms-features-sidebar">
    <div class="tool-title">
        <h3>تنظیمات</h3>
    </div>
 
    <div class="ms-features-block">
        <div class="ms-features-title">رنگ‌ها</div>
        <ul class="bg-panel ms-change-color">
            <li class="active" data-color="01">
                <a href="javascript:void(0)" class="colorcode1"></a>
            </li>
            <li data-color="02">
                <a href="javascript:void(0)" class="colorcode2"></a>
            </li>
            <li data-color="03">
                <a href="javascript:void(0)" class="colorcode3"></a>
            </li>
            <li data-color="04">
                <a href="javascript:void(0)" class="colorcode4"></a>
            </li>
            <li data-color="05">
                <a href="javascript:void(0)" class="colorcode5"></a>
            </li>
            <li data-color="06">
                <a href="javascript:void(0)" class="colorcode6"></a>
            </li>
            <li data-color="07" class="">
                <a href="javascript:void(0)" class="colorcode7"></a>
            </li>
            <li data-color="08">
                <a href="javascript:void(0)" class="colorcode8"></a>
            </li>
            <li data-color="09">
                <a href="javascript:void(0)" class="colorcode9"></a>
            </li>
        </ul>
    </div>
    <div class="ms-features-block">
        <div class="ms-tools-sidebar-content">
            <div class="ms-features-title">حالت پس رمینه</div>
            <div class="ms-change-mode active" id="ms-change-mode">
                <div class="ms-mode-switch">
                    <div class="ms-mode-btn">انتخاب</div>
                    <div class="ms-mode-on">روشن</div>
                    <div class="ms-mode-off">خاموش</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Plugins JS -->
<script src="{% static 'assets/js/plugins/jquery-3.5.1.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/popper.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/bootstrap.bundle.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/bootstrap-select.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/fontawesome.js' %}"></script>
<script src="{% static 'assets/js/plugins/owl.carousel.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/swiper-bundle.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/infiniteslidev2.js' %}"></script>
<script src="{% static 'assets/js/plugins/jquery.zoom.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/slick.min.js' %}"></script>
<script src="{% static 'assets/js/plugins/nouislider.js' %}"></script>

<!-- Main Js -->
<script src="{% static 'assets/js/main.js' %}"></script>
</body>

</html>